<!DOCTYPE html>
<html>
  <head>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <style>
      body
      {
        box-sizing: border-box;
        font-size: 18px;
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }
      #header 
      {
        font-size: 1.8em;
        line-height: 2;
        padding: 0 .5em;
      }
      #notebooks
      {
        font-size: 1.4em;
        line-height: 2.5;
        padding: 0;
        background: #333;
        color: #FFF;
        position: fixed;
        height: 100%;
        width: 8em;
        overflow-y: auto;
        left: 0;
      }
      #notes
      {
        font-size: 1.2em;
        line-height: 2.5;
        padding: 0;
        background: #DDD;
        color: #111;
        position: fixed;
        left: 9.333em;
        height: 100%;
        width: 8em;
        overflow-y: auto;
      }
      #body 
      {
        padding: 1em 0 1em 21.8em;
      }
      @media (max-width: 645px) {
        #notebooks 
        {
          font-size: 1em;
          overflow: hidden;
          width: 1em;
        }
        #notes
        {
          font-size: 1em;
          overflow: hidden;
          width: 1em;
          left: 1em;
        }
        #notes,
        #notebooks 
        {
          transform: translate3d(0,0,0);
          transition: width .5s, left .5s;
        }
        #notebooks > ol > li,
        #notes     > ol > li 
        {
          overflow: hidden;
          white-space: nowrap;
        }
        #notebooks.slide, 
        #notes.slide 
        {
          width: 8em;
        }
        #notes.slide
        {
          left: 8em;
        }
        #body 
        {
          padding-left: 3em;
        }
        #body.slide 
        {
          padding-left: 17em;
        }
      }
      #notebooks > ol,
      #notes     > ol
      {
        margin: 0;
        padding: 0;
        list-style: none;
      }
      #notes > ol > li,
      #notebooks > ol > li
      {
        padding: 0 1em;
      }
      #notebooks > ol > li.active 
      {
        background: #DDD;
        color: #111;
      }
      #notes > ol > li.active 
      {
        background: #FFF;
      }
      #notes > ol:not(.active)
      {
        display: none; 
      }
      #notes > ol.active
      {
        display: inherit;
      }
    </style>
  </head>
  <body>
    <div id="notebooks">
      <div id="header">
        magpie
      </div>
      <ol>
        <li data-id="1" class="active">notebook 1</li>
        <li data-id="2">notebook 2</li>
        <li data-id="3">notebook 3</li>
        <li data-id="4">notebook 4</li>
        <li data-id="5">notebook 5</li>
      </ol>
    </div>
    <div id="notes">
      <ol data-notebook="1" class="active">
        <li class="active">1.1</li>
        <li>1.2</li>
        <li>1.3</li>
        <li>1.4</li>
      </ol>
      <ol data-notebook="4">
        <li class="active">4.1</li>
        <li>4.2</li>
        <li>4.3</li>
        <li>4.4</li>
      </ol>
      <ol data-notebook="3">
        <li class="active">3.1</li>
        <li>3.2</li>
        <li>3.3</li>
        <li>3.4</li>
      </ol>
      <ol data-notebook="2">
        <li class="active">2.1</li>
        <li>2.2</li>
        <li>2.3</li>
        <li>2.4</li>
      </ol>
      <ol data-notebook="5">
        <li class="active">5.1</li>
        <li>5.2</li>
        <li>5.3</li>
        <li>5.4</li>
        <li>5.5</li>
        <li>5.6</li>
        <li>5.7</li>
        <li>5.8</li>
        <li>5.9</li>
        <li>5.10</li>
        <li>5.11</li>
        <li>5.12</li>
        <li>5.13</li>
        <li>5.14</li>
        <li>5.15</li>
        <li>5.16</li>
        <li>5.17</li>
        <li>5.18</li>
        <li>5.19</li>
        <li>5.20</li>
        <li>5.21</li>
        <li>5.22</li>
        <li>5.23</li>
        <li>5.24</li>
        <li>5.25</li>
        <li>5.26</li>
        <li>5.27</li>
        <li>5.28</li>
      </ol>
    </div>
    <div id="body">
      notes show up here, pick one from above and watch me change .. 
    </div>
    <script>
      (function(){
        var divs = [document.getElementById("notebooks"), document.getElementById("notes"), document.getElementById("body")];
        var notebooks = document.getElementById("notebooks").getElementsByTagName("li");
        var notes = document.getElementById("notes").getElementsByTagName("ol");
        var open = function(){
          if(document.body.offsetWidth >= 415){
            return 0;
          }
          for(var i in divs){
            if(divs[i].className.match(/(\s|^)slide(\s|$)/g)){
              //they're open
              return 0;
            }
            divs[i].className += " slide";
          }
          return 1;
        };
        var close = function(){
          for(var i in divs){
            divs[i].className = divs[i].className.replace(/(\s|^)slide(\s|$)/g, "");
          }
        };
        for(var i in divs){
          divs[i].ontouch = divs[i].onclick = function(e){
            if(!open()){
              close();
            }
            e.stopPropagation();
          };
        }
        for(var j in notes){
          (function(ol){
            try {
              var elems = ol.getElementsByTagName("li");
              for(var i in elems){
                elems[i].onclick = elems[i].ontouch = function(e){
                  e.stopPropagation();
                  if(open()){
                    return;
                  }
                  document.getElementById("body").innerHTML = "You're now viewing notebook: \"<i>" + document.getElementById("notebooks").getElementsByClassName("active")[0].textContent + "</i>\" and note \"<i>" + this.textContent + "</i>\"";
                  for(var i in elems){
                    try {
                      elems[i].className = elems[i].className.replace(/(\s|^)active(\s|$)/g, "");
                    } catch(e) { }
                  }
                  close();
                  this.className += " active";
                };
              }
            } catch(e) { }
          })(notes[j]);
        }
        for(var i in notebooks){
          notebooks[i].onclick = notebooks[i].ontouch = function(e){
            e.stopPropagation();
            if(open()){
              return;
            }
            //show the right notes
            for(var i in notes){ 
              try {
                if(notes[i].getAttribute("data-notebook") != this.getAttribute("data-id")){
                  notes[i].className = notes[i].className.replace(/(\s|^)active(\s|$)/g, "");
                }else{
                  if(! notes[i].className.match(/(\s|^)active(\s|$)/g)){
                    notes[i].className += " active";
                  }
                }
              } catch(e) { }
            }
            for(var i in notebooks){
              try {
                notebooks[i].className = notebooks[i].className.replace(/(\s|^)active(\s|$)/g, "");
              } catch(e) { }
            }
            this.className += " active";
            var notename = "";
            var elems = document.getElementById("notes").getElementsByTagName("ol");
            for(var j in elems){
              try {
                if(elems[j].className.match(/(\s|^)active(\s|$)/g)){
                  notename = elems[j].getElementsByClassName("active")[0].textContent;
                }
              } catch(e) { }
            }
            document.getElementById("body").innerHTML = "You're now viewing notebook: \"<i>" + this.textContent + "</i>\" and note \"<i>" + notename + "</i>\"";
          };
        }
      })();
    </script>
  </body>
</html>
